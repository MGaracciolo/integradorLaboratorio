doctype html
html(lang='es')
  head
    meta(charset='UTF-8')
    meta(name='viewport', content='width=device-width, initial-scale=1.0')
    title orden 
    link(rel="stylesheet", href="/stylesheets/style.css")
    link(rel="stylesheet", href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css")
    //cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css
    link(rel='stylesheet', type='text/css', href='https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css')
    script(src='https://code.jquery.com/jquery-3.7.0.js')
    script(src='https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js')
    
  body
    #cabecera
      img(src='/images/banner.png', alt='Logo del laboratorio')
    #botones
      button#botonAgregarPaciente.custom-button Agregar Paciente
      button#botonBuscarPaciente.custom-button Buscar Paciente
      button#botonInicio.custom-button Inicio
      button.custom-button Orden de Trabajo     
      button.custom-button Salir
    
    h2 Nueva Orden

    table#tablaBuscarPacienteO.cell-border.compact.display
        thead
            tr
            th   
            th Id Paciente
            th DNI
            th Nombre
            th Apellido
            th Fecha de Nacimiento
        tbody
            each paciente in pacientes
                tr
                    td 
                        input(type="button", id="idPacienteInput", value="Seleccionar")
                    td.buscable= paciente.id_paciente
                    td.buscable= paciente.dni
                    td.buscable= paciente.nombre
                    td.buscable= paciente.apellido
                    td.buscable= paciente.fecha_nacimiento
                    

    #contenedorformularioOrdenes
        form#formularioOrden(style='display: block;', action='/rutaOrden/agregarOrden', method='post')
            h2 Paciente:
            //- p
            //-     | ID
            //-     input(type="text", id="idPacienteInput" readonly value="id")
            //- p
            //-     | Nombre
            //-     input(type="text", name="nombre" value=paciente.nombre readonly )
            //- p
            //-     | ID
            //-     input(type="text", name="apellido" readonly value=paciente.apellido)
            //- p
            //-     | ID
            //-     input(type="text", name="sexo" readonly value=paciente.id_sexo)
            p
                | Fecha de Ingreso: 
                input(type="date" name="fecha_ingreso" required)
            p
                | Diagnóstico:
                input(type="text" name="diagnostico"  placeholder='Ingrese el presunto diagnostico' )
            p
                | Fecha de Entrega:
                input(type="date" name="fecha_entrega")
            p
                | Doctor:
                input(type="text" name="doctor"  placeholder='Ingrese el nombre del doctor' required)
            p
                | Estado:
                select(name="id_estado" required)
                    option(value="1") Ingresada
                    option(value="2") Esperando Toma de Muestra
                    option(value="3") Analítica
            p
                | Observación:
                textarea(name="observacion")

            button#botonAgregarOrden(type="submit") Crear Orden de Trabajo

    //- table#tablaOrdenes.cell-border.compact.display
    //-     thead
    //-         tr
    //-         th Id Orden
    //-         th Diagnóstico
    //-         th Fecha de Ingreso
    //-         th Fecha de Entrega
    //-         th Doctor
    //-         th Estado
    //-         th Observación
    //-         th Id Paciente
    //-         th DNI
    //-         th Nombre
    //-         th Apellido
    //-         th Activo
    //-         th Opciones
    //-     tbody
    //-         each orden in ordenes
    //-             tr
    //-                 td.buscable= orden.id_orden
    //-                 td.buscable= orden.diagnostico
    //-                 td.buscable= orden.fecha_ingreso
    //-                 td.buscable= orden.fecha_entrega
    //-                 td.buscable= orden.doctor
    //-                 td.buscable= orden.estado.valor
    //-                 td.buscable= orden.observacion
    //-                 td.buscable= orden.id_paciente
    //-                 td.buscable= orden.paciente.dni
    //-                 td.buscable= orden.paciente.nombre
    //-                 td.buscable= orden.paciente.apellido
    //-                 td.buscable= orden.activo
    //-                 td
    //-                  input(type="button", value="Editar")
    //-                  input(type="button", value="Desactivar")
    //-                  input(type="button", value="Activar")
    

    footer#footer
      p Rivadavia 548, San Luis, Argentina
      p Teléfono: 266 4000000
      p Email: labwm@gmail.com
      p &copy; 2023 TreeLabWM
    
    script(src='/javascripts/lab.js')
    script.
        $(document).ready(function() {
            $('#tablaBuscarPacienteO').DataTable({
                searching: true,
                language: {
                search: "Buscar paciente:"
                },
                columnDefs: [{
                targets: 'buscable',
                searchable: true
                }]
        });
        
            //- $('#tablaOrdenes').DataTable({
            //-     searching: true,
            //-     language: {
            //-     search: "Buscar en ordenes:"
            //-     },
            //-     columnDefs: [{
            //-     targets: 'buscable',
            //-     searchable: true
            //-     }]
            //- });
        });
